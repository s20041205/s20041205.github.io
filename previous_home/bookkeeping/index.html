<!DOCTYPE html>
<html>
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=yes">

	<link rel="stylesheet" href="css/style.css">
	<link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">
	
	<title>2022記帳</title>
	
</head>
<body>
	<header></header>
	<section id="form">
		<div class="container">
			<div class="row">
				<div class="col-md-8">
					<nav aria-label="breadcrumb">
						<ol class="breadcrumb">
						<li class="breadcrumb-item"><a href="#">記帳</a></li>
						<li class="breadcrumb-item active" aria-current="page">v2.0.0</li>
						</ol>
					</nav>
				</div>
			</div>
			<div class="row">
				<div class="col-md-6 offset-md-1 text-left">
					<div class="row">
						<form name="submit-to-google-sheet">
							<input name="Date" type="date" id="fdate" required>
							<select name="Balance" id="balance-list" onchange="changeBalance(this.selectedIndex)">
							<!--input name="Balance" type="text" placeholder="Income/ Outcome"-->
							<input name="Topclass" type="text" placeholder="Category">
							<input name="Subclass" type="text" placeholder="Sub-Category">
							<input name="Price" type="number" placeholder="Price">
							<input name="Detail" type="text" placeholder="Detail">
							<input name="Name" type="text" placeholder="Name">
							<!--<input name="Update" type="text" placeholder="Time">-->
							<button type="submit">Send</button>
						</form>
					</div>
				</div>
			</div>
			<!-- Section form items -->
			<script type="text/javascript">
				var balance=['請選擇', '收入', '支出'];
				var balanceSelect=document.getElementById("balance-list");
				var balanceInner="";
				for(var i=0;i<balance.length;i++){
					balanceInner=balanceInner+'<option>'+balance[i]+'</option>';
				}
				balanceSelect.innerHTML=balanceInner;
				
				
				var topclass=new Array();
				topclass[0]=[];
				topclass[1]=['薪資', '利息', '獎金', '投資', '販賣'];
				topclass[2]=['飲食', '衣裝', '居住', '交通', '教育', '娛樂', '健康', '社交', '其他'];	
				function changeBalance(index){
					var topclassInner="";
					for(var i=0;i<topclass[index].length;i++){
						topclassInner=topclassInner+'<option>'+topclass[index][i]+'</option>';
					}
					var topclassSelect=document.getElementById("topclass-list");
					topclassSelect.innerHTML=topclassInner;
					var subclassSelect=document.getElementById("subclass-list");
					subclassSelect.innerHTML="";
				}
				
				
				var subclass=new Array();
				subclass[0]=['早餐', '午餐', '晚餐', '食材', '水果', '零食', '飲料'];	
				subclass[1]=['衣服', '鞋子', '包包', '理髮', '美容'];	
				subclass[2]=['房租', '水費', '電費', '瓦斯費', '網路費', '生活消耗品', '家電', '家具', '生活物品', '維修費'];	
				subclass[3]=['汽油燃料', '維修保養', '火車高鐵', '捷運', '公車', '計程車', '公共租借', '停車費', '過路費'];	
				subclass[4]=['文具', '書籍', '材料', '課程學費'];	
				subclass[5]=['手機費', '3C產品', '旅宿', '門票', '遊戲', '電影', '數位服務'];	
				subclass[6]=['門診', '手術', '藥品', '運動'];	
				subclass[7]=['捐款', '孝親費', '交際'];	
				subclass[8]=['貸款', '稅務', '罰單', '保險', '手續費', '其他'];	
				function changetopclass(){
					var index = document.getElementById("topclass-list").selectedIndex;
					var bindex = document.getElementById("balance-list").selectedIndex;
					var subclassInner="";
					if(bindex < 2)
					{
						subclassInner="";
					}
					else
					{
						for(var i=0;i<subclass[index].length;i++){
							subclassInner=subclassInner+'<option>'+subclass[index][i]+'</option>';
						}
					}
					var subclassSelect=document.getElementById("subclass-list");
					subclassSelect.innerHTML=subclassInner;
				}
				/*function changetopclass(){
					var index = document.getElementById("topclass-list").selectedIndex;
					var bindex = document.getElementById("balance-list").selectedIndex;
					var subclassInner="";
					if(bindex < 2)
					{
						subclassInner="";
					}
					else
					{
						for(var i=0;i<subclass[index].length;i++){
							subclassInner=subclassInner+'<option>'+subclass[index][i]+'</option>';
						}
					}
					var subclassSelect=document.getElementById("subclass-list");
					subclassSelect.innerHTML=subclassInner;
				}*/
				
				var who=['Jerry_Hu', 'Alice_Lin'];
				var whoSelect=document.getElementById("who-list");
				var whoInner="";
				for(var i=0;i<who.length;i++){
					whoInner=whoInner+'<option>'+who[i]+'</option>';
				}
				whoSelect.innerHTML=whoInner;
			</script>
			<script>
				var today = new Date();
				var date = today.getFullYear()+'-'+(today.getMonth()+1)+'-'+today.getDate();
				var time = today.getHours() + ":" + today.getMinutes() + ":" + today.getSeconds();
				var dateTime = date+' '+time;
				document.getElementById("fdate").valueAsDate = today;

				//[Section submit to google sheet]
				//implement url
				/*const scriptURL = 'https://script.google.com/macros/s/AKfycbz1C9SHtWHpbBHGLx2h-Lj8PYPPnDkdj7DhdnOdW0Kj2p6hQhQbJM5cznexZi9p3NEC/exec'*/
				//url for test
				const scriptURL = 'https://script.google.com/macros/s/AKfycbzdt_vhicpfz1zyCmRfbN4bzLWbUW9g9kKS48rQ3Arkfjtp6yw2xY4SQBmKQBALBGnN/exec'
				const form = document.forms['submit-to-google-sheet']
			
				form.addEventListener('submit', e => {
					e.preventDefault()
					fetch(scriptURL, { method: 'POST', body: new FormData(form)})
					.then(response => console.log('Success!', response))
					.catch(error => console.error('Error!', error.message))
				})
			</script>

		</div>
	</section>
</body>
</html>
